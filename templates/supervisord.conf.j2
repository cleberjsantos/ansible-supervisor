; This file was generated by Ansible for {{ ansible_fqdn }}
; Do NOT modify this file by hand!

; supervisor config file

; set options for a section
{% macro set_section(section_label, subsections) %}
{% for section in subsections %}
[{{ section_label }}:{{ section.name }}]
{% for option, value in section.items() %}
{% if option != 'name' %}
{% if option == 'environment' and value is iterable and value is not string %}
{{ option }} ={% for k,v in value.iteritems() %}{{ k }}="{{v}}", {% endfor %} 

{% else %}
{{ option }} = {{ value }}
{% endif %}
{% endif %}
{% endfor %}
{% endfor %}
{% endmacro %}

[inet_http_server]
port = {{ supervisor_port }}                 ; A TCP host:port value or (e.g. 127.0.0.1:9001) on which supervisor will listen for HTTP/XML-RPC requests. To listen on all interfaces in the machine, use :9001 or *:9001. Default: No default.
username = {{ supervisor_username }}                  ; The username required for authentication to this HTTP server. Default: No username required.

password = {{ supervisor_password }}                          ; The password required for authentication to this HTTP server. This can be a cleartext password, or can be specified as a SHA-1 hash if prefixed by the string {SHA}. For example, {SHA}82ab876d1387bfafe46cc1c8a2ef074eae50cb1d is the SHA-stored version of the password “thepassword”. Default: No password required.


[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[supervisord]
logfile={{supervisor_logdir}}/supervisord.log                          ; (main log file;default $CWD/supervisord.log)
pidfile={{supervisor_pid}}                                             ; (supervisord pidfile;default supervisord.pid)
childlogdir={{supervisor_logdir}}                                      ; ('AUTO' child log dir, default $TEMP)
logfile_maxbytes = {{ supervisor_logfile_maxbytes | default('50MB') }}      ; The maximum number of bytes that may be consumed by the activity log file before it is rotated (suffix multipliers like “KB”, “MB”, and “GB” can be used in the value). Set this value to 0 to indicate an unlimited log size. Default: 50MB

logfile_backups = {{ supervisor_logfile_backups | default(10) }}       ; The number of backups to keep around resulting from activity log file rotation. If set to 0, no backups will be kept. Default: 10
loglevel = {{ supervisor_loglevel | default('info') }}                 ; critical, error, warn, info, debug, trace, or blather: Default: info
umask = {{ supervisor_umask | default(022) }}                          ; The umask of the supervisord process. Default: 022
nodaemon = {{ supervisor_nodaemon | default(false) }}                  ; If true, supervisord will start in the foreground instead of daemonizing. Default: false
nocleanup = {{ supervisor_nocleanup | default(false) }}                ;Prevent supervisord from clearing any existing AUTO chlild log files at startup time. Useful for debugging. Default: false


; the below section must remain in the config file for RPC
; (supervisorctl/web interface) to work, additional interfaces may be
; added by defining them in separate rpcinterface: sections
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl= {{ supervisor_serverurl }}  ; use a unix:// URL  for a unix socket
username = {{ supervisor_username }}                  ; The username required for authentication to this HTTP server. Default: No username required.

password = {{ supervisor_password }}                          ; The password required for authentication to this HTTP server. This can be a cleartext password, or can be specified as a SHA-1 hash if prefixed by the string {SHA}. For example, {SHA}82ab876d1387bfafe46cc1c8a2ef074eae50cb1d is the SHA-stored version of the password “thepassword”. Default: No password required.

; programs
{{ set_section('program', supervisor_tasks) }}

; groups
{{ set_section('group', supervisor_groups) }}

; events
{{ set_section('eventlistener', supervisor_events) }}

; The [include] section can just contain the "files" setting.  This
; setting can list multiple files (separated by whitespace or
; newlines).  It can also contain wildcards.  The filenames are
; interpreted as relative to this file.  Included files *cannot*
; include files themselves.

[include]
files = {{supervisor_incdir}}/*.conf
